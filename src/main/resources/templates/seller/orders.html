<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layouts/layout}">
<head>
    <title>My Orders & Sales - Marketplace</title>
</head>
<body>
    <div th:fragment="content">
        <div class="container py-8">
            <div class="flex items-center gap-4 mb-6">
                <a th:href="@{/seller/products}" class="text-gray-600 hover:text-primary">Products</a>
                <a th:href="@{/seller/orders}" class="font-medium text-primary border-b-2 border-primary pb-2">Sales & Orders</a>
            </div>
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900">Sales & Orders</h1>
                <p class="text-gray-600 mt-1">Orders containing your products, payment status and history</p>
            </div>

            <div class="space-y-4" th:if="${orders != null and !orders.isEmpty()}">
                <div th:each="order : ${orders}" class="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div class="flex-1">
                            <div class="flex flex-wrap items-center gap-2 mb-2">
                                <span class="font-mono text-sm text-gray-500" th:text="${order.id}">Order ID</span>
                                <span class="px-2 py-0.5 rounded text-xs font-medium"
                                      th:classappend="${order.status.name == 'CONFIRMED' or order.status.name == 'PROCESSING'} ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'"
                                      th:text="${order.status}">Status</span>
                                <span class="px-2 py-0.5 rounded text-xs font-medium"
                                      th:classappend="${order.paymentStatus != null and order.paymentStatus.name == 'PAID'} ? 'bg-green-100 text-green-800' : 'bg-amber-100 text-amber-800'"
                                      th:text="${order.paymentStatus}">Payment</span>
                            </div>
                            <h3 class="font-semibold text-gray-900" th:text="${order.productTitle}">Product</h3>
                            <p class="text-sm text-gray-600">Qty: <span th:text="${order.quantity}">1</span> × $<span th:text="${#numbers.formatDecimal(order.totalPrice, 1, 2)}">0.00</span></p>
                            <p class="text-sm text-gray-500 mt-1" th:text="'Ordered: ' + ${order.createdAt}">Date</p>
                        </div>
                        <div class="text-left md:text-right">
                            <p class="text-xl font-bold text-primary" th:text="'$' + ${#numbers.formatDecimal(order.totalPrice, 1, 2)}">$0.00</p>
                            <p class="text-xs text-green-600 mt-1" th:if="${order.paymentStatus != null and order.paymentStatus.name == 'PAID'}">✓ Funds credited</p>
                        </div>
                    </div>
                </div>
            </div>

            <div th:if="${orders == null or orders.isEmpty()}" class="text-center py-16 bg-white rounded-xl border border-gray-200">
                <p class="text-gray-500">No orders yet</p>
            </div>

            <div class="mt-8 flex justify-center gap-4" th:if="${totalPages != null and totalPages > 1}">
                <a th:if="${currentPage > 0}" th:href="@{/seller/orders(page=${currentPage - 1})}" class="btn-secondary px-6 py-2">← Previous</a>
                <span class="text-gray-600 font-medium" th:text="'Page ' + (${currentPage} + 1) + ' of ' + ${totalPages}">Page</span>
                <a th:if="${currentPage < totalPages - 1}" th:href="@{/seller/orders(page=${currentPage + 1})}" class="btn-secondary px-6 py-2">Next →</a>
            </div>
        </div>
    </div>
</body>
</html>
