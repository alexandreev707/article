# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é CryptoDrop MVP

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend

### 1. Unit —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit —Ç–µ—Å—Ç–æ–≤
./gradlew test

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
./gradlew test --tests "CatalogServiceTest"
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```bash
# –¢–µ—Å—Ç—ã —Å Testcontainers (PostgreSQL, Kafka)
./gradlew integrationTest
```

### 3. API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ cURL

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
```bash
curl -X GET "http://localhost:8080/api/v1/products?page=0&limit=20" \
  -H "Content-Type: application/json"
```

#### –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```bash
curl -X GET "http://localhost:8080/api/v1/categories" \
  -H "Content-Type: application/json"
```

#### –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä (—Ç—Ä–µ–±—É–µ—Ç –∫–æ—à–µ–ª–µ–∫)
```bash
curl -X POST "http://localhost:8080/api/v1/products" \
  -H "Content-Type: application/json" \
  -H "X-Wallet-Address: FvwEAkChwcvq9VDQKpTyPBsEwQXw89LH9wUrYzCkNWFV" \
  -d '{
    "categoryId": 1,
    "title": "TWS Earbuds Pro",
    "description": "Wireless earbuds with noise cancellation",
    "priceUsd": 45.00,
    "images": ["https://example.com/earbuds.jpg"]
  }'
```

#### –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
```bash
curl -X POST "http://localhost:8080/api/v1/orders" \
  -H "Content-Type: application/json" \
  -H "X-Wallet-Address: BuyerWalletAddress123" \
  -d '{
    "productId": 1,
    "shippingCountry": "US",
    "shippingAddress": "{\"address\": \"123 Main St\", \"city\": \"New York\"}"
  }'
```

#### –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
```bash
curl -X GET "http://localhost:8080/api/v1/orders/buyer/my-orders" \
  -H "X-Wallet-Address: BuyerWalletAddress123"
```

## üé® –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Frontend

### 1. –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
cd frontend
npm install
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
2. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫"
3. –í—ã–±–µ—Ä–∏—Ç–µ Phantom –∏–ª–∏ Solflare
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞
1. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ç–æ–≤–∞—Ä—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (–ø—Ä–æ–¥–∞–≤–µ—Ü)
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ü—Ä–æ–¥–∞–≤—Ü—É"
3. –ù–∞–∂–º–∏—Ç–µ "+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä

#### –ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞
1. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
2. –ù–∞–∂–º–∏—Ç–µ "–ö—É–ø–∏—Ç—å –∑–∞ USDC"
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ –∫–æ—à–µ–ª—å–∫–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
docker exec -it cryptodrop-postgres psql -U postgres -d cryptodrop

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã
\dt

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã
SELECT * FROM products LIMIT 10;

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑—ã
SELECT * FROM orders LIMIT 10;
```

### Kafka

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ø–∏–∫–∏
docker exec -it cryptodrop-kafka kafka-topics --list --bootstrap-server localhost:9092

# –ü—Ä–æ—Å–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
docker exec -it cryptodrop-kafka kafka-console-consumer \
  --bootstrap-server localhost:9092 \
  --topic order-events \
  --from-beginning
```

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# Backend –ª–æ–≥–∏ (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ gradle)
./gradlew bootRun

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ IDE/–∫–æ–Ω—Å–æ–ª–∏
```

## üìä –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–æ–∫—É–ø–∫–∏

1. **–ü—Ä–æ–¥–∞–≤–µ—Ü —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–≤–∞—Ä**
   - POST /api/v1/products
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –ë–î

2. **–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∫–∞—Ç–∞–ª–æ–≥**
   - GET /api/v1/products
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

3. **–ü–æ–∫—É–ø–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑**
   - POST /api/v1/orders
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —ç—Å–∫—Ä–æ—É (mock)

4. **–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—É**
   - POST /api/v1/orders/{id}/confirm-payment
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ PAID

5. **–ü—Ä–æ–¥–∞–≤–µ—Ü –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä**
   - –û–±–Ω–æ–≤–∏—Ç—å tracking —á–µ—Ä–µ–∑ API (–≤—Ä—É—á–Ω—É—é)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å SHIPPED

6. **–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É**
   - POST /api/v1/orders/{id}/confirm-delivery
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É –ø—Ä–æ–¥–∞–≤—Ü—É (mock)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å COMPLETED

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

1. –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é: `GET /api/v1/products?query=earbuds`
2. –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: `GET /api/v1/products?category=1`
3. –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ: `GET /api/v1/products?max_price=100`

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å PostgreSQL
docker-compose ps postgres

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart postgres
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Kafka

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps kafka

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs kafka

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart kafka zookeeper
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å CORS

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `SecurityConfig.kt` —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ origins:
```kotlin
configuration.allowedOrigins = listOf("http://localhost:3000", "http://localhost:5173")
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ—à–µ–ª—å–∫–æ–º

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å–µ—Ç—å (mainnet/devnet)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–æ—à–µ–ª–µ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

- [ ] –í—Å–µ unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- [ ] –ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–≥—Ä–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Kafka —Å–æ–±—ã—Ç–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è
- [ ] –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
